# ä¹¦æ¥ä¸Šå› - è¿™æ¬¡ä¸»è¦å†™äº†æœåŠ¡å™¨ä¸­çš„é™æ€é¡µé¢

# ç¥è‡ªå·±ç”Ÿæ—¥å¿«ä¹ ğŸ‚ğŸ‚ğŸ‚

> å½“å‰ç›®å½•ç»“æ„

![img](../../img/2022-09-22/01-%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/1.png)

## 1, åœ¨ public æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€äº›é™æ€æ–‡ä»¶, js, css, img, font, html ç­‰ç­‰

### å†™å®Œä¹‹åçš„ public æ–‡ä»¶å¤¹å·®ä¸å¤šæ˜¯è¿™æ ·çš„çš„

> ç›®å½•ç»“æ„

![img](../../img/2022-09-22/01-%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/2.png)

## 2, å°†å·¦è¾¹çš„ä¾§è¾¹æ ä»å›ºå®šå†™æ­»çš„æ•°æ®æ”¹ä¸ºåŠ¨æ€æ¸²æŸ“

![img](../../img/2022-09-22/01-%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/3.png)

> ä¸‹é¢æ˜¯åŸæœ¬çš„ html ç»“æ„

![img](../../img/2022-09-22/01-%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/4.png)

### æ ¹æ®å†…å®¹åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º data/menu.json æ–‡ä»¶

> data/menu.json

```json
{
  "status": 200,
  "menuListDatas": [
    {
      "id": 1,
      "title": "æœºæ„ç®¡ç†",
      "icon": "icon-group",
      "pid": 0
    },
    {
      "id": 2,
      "title": "äººå‘˜ç®¡ç†",
      "icon": "icon-user",
      "pid": 0
    },
    {
      "id": 3,
      "title": "å†…å®¹ç®¡ç†",
      "icon": "icon-file",
      "pid": 0
    },
    {
      "id": 4,
      "title": "æ¶ˆæ¯ç®¡ç†",
      "icon": "icon-message",
      "pid": 0
    },
    {
      "id": 5,
      "title": "ç‰ˆæœ¬å‡çº§",
      "icon": "icon-arrowup",
      "pid": 0
    },
    {
      "id": 6,
      "title": "ç”¨æˆ·åé¦ˆ",
      "icon": "icon-file-text",
      "pid": 0
    },
    {
      "id": 7,
      "title": "åŒ»é™¢ç®¡ç†",
      "icon": "",
      "pid": 1
    },
    {
      "id": 8,
      "title": "ç”¨æˆ·ç®¡ç†",
      "icon": "",
      "pid": 2
    },
    {
      "id": 9,
      "title": "å®¶äººç®¡ç†",
      "icon": "",
      "pid": 2
    },
    {
      "id": 10,
      "title": "ç™»å½•è´¦å·",
      "icon": "",
      "pid": 2
    },
    {
      "id": 11,
      "title": "èµ„è®¯ç®¡ç†",
      "icon": "",
      "pid": 3
    },
    {
      "id": 12,
      "title": "å¹¿å‘Šç®¡ç†",
      "icon": "",
      "pid": 3
    },
    {
      "id": 13,
      "title": "é¡µé¢ç®¡ç†",
      "icon": "",
      "pid": 3
    }
  ]
}
```

### é‡ç‚¹æ¥äº†, è¿™é‡Œéœ€è¦æ ¹æ® json æ•°æ®æ¥åˆ¶ä½œå‡ºæ ‘æ¡©æ•°æ®ç»“æ„, åœ¨æ ¹æ®è¿™ä¸ªç»“æ„æ¸²æŸ“é¡µé¢, éœ€è¦åˆ©ç”¨åˆ°é€’å½’, ä¹Ÿæ˜¯ä»Šå¤©è¯¾ç¨‹ä¸­çš„é‡ç‚¹

> è¿™é‡Œä¸ºäº†é¿å…è·¨åŸŸé—®é¢˜, å°±ç›´æ¥ç”¨ cors è§£å†³å¥½äº†

```bash
npm install cors --save
```

```js
// app.js

// ä»¥ååŸºæœ¬çš„æ³¨é‡Šå°±ä¸åœ¨markdownä¸­å†™äº†, ä¸»è¦å†™é‡ç‚¹çªå‡ºçš„æ³¨é‡Š
let express = require("express");
let cors = require("cors"); // è¿™é‡Œå¼•å…¥corsæ¨¡å—
require("./database/db.js");
let router = require("./router");
let app = express();
app.use(cors()); // è¿™é‡Œä½¿ç”¨corsæ¨¡å—, è§£å†³è·¨åŸŸè¯·æ±‚é—®é¢˜
app.use(express.static("./public"));
app.use("/", router);
app.listen(80, () => {
  console.log("server is running");
});
```

### å› ä¸ºè¯¾ç¨‹æ²¡æœ‰è®²åˆ°è¿™é‡Œçš„è¯·æ±‚æ¥å£, æ‰€ä»¥å°±æŠŠ json å†™åœ¨é™æ€èµ„æºé‡Œç”¨å…ˆå’¯

> public/data/menu.json

```json
{
  "status": 200,
  "menuListDatas": [
    {
      "id": 1,
      "title": "æœºæ„ç®¡ç†",
      "icon": "icon-group",
      "pid": 0
    },
    {
      "id": 2,
      "title": "äººå‘˜ç®¡ç†",
      "icon": "icon-user",
      "pid": 0
    },
    {
      "id": 3,
      "title": "å†…å®¹ç®¡ç†",
      "icon": "icon-file",
      "pid": 0
    },
    {
      "id": 4,
      "title": "æ¶ˆæ¯ç®¡ç†",
      "icon": "icon-message",
      "pid": 0
    },
    {
      "id": 5,
      "title": "ç‰ˆæœ¬å‡çº§",
      "icon": "icon-arrowup",
      "pid": 0
    },
    {
      "id": 6,
      "title": "ç”¨æˆ·åé¦ˆ",
      "icon": "icon-file-text",
      "pid": 0
    },
    {
      "id": 7,
      "title": "åŒ»é™¢ç®¡ç†",
      "icon": "",
      "pid": 1
    },
    {
      "id": 8,
      "title": "ç”¨æˆ·ç®¡ç†",
      "icon": "",
      "pid": 2
    },
    {
      "id": 9,
      "title": "å®¶äººç®¡ç†",
      "icon": "",
      "pid": 2
    },
    {
      "id": 10,
      "title": "ç™»å½•è´¦å·",
      "icon": "",
      "pid": 2
    },
    {
      "id": 11,
      "title": "èµ„è®¯ç®¡ç†",
      "icon": "",
      "pid": 3
    },
    {
      "id": 12,
      "title": "å¹¿å‘Šç®¡ç†",
      "icon": "",
      "pid": 3
    },
    {
      "id": 13,
      "title": "é¡µé¢ç®¡ç†",
      "icon": "",
      "pid": 3
    }
  ]
}
```

### åœ¨é™æ€é¡µé¢ home.html å¼•å…¥çš„ js ä¸­, é¦–è¡Œæ’å…¥ä»¥ä¸‹å†…å®¹

```js
// public/js/home.js
// åŠ¨æ€æ¸²æŸ“menuæ 
$.ajax({
  async: false, // è¿™é‡Œå»ºè®®ä½¿ç”¨async: false, å°†ajaxä½œä¸ºåŒæ­¥è¯·æ±‚
  method: "GET",
  url: "./data/menu.json",
  success(data) {
    let dataArr = data.menuListDatas;
    dataArr.forEach((item) => {});
    function treeMenu(dataArr) {
      let oMap = {};
      let arr = [];
      dataArr.forEach((item) => {
        oMap[item.id] = item;
      });
      dataArr.forEach((item) => {
        let parent = oMap[item.pid];
        if (parent) {
          (parent.children || (parent.children = [])).push(item);
        } else {
          arr.push(item);
        }
      });
      renderMenu(arr);
    }
    treeMenu(dataArr);
    function renderMenu(data) {
      console.log(data);
      let str = `
      <div id="menu">`;

      data.forEach((item) => {
        str += `
        <div class="list">
          <p class="title">${item.title}</p>
          <i class="iconfont ${item.icon}"></i>`;
        if (item.children) {
          str += `
          <ul>`;
          item.children.forEach((item) => {
            str += `
            <li>
              <a class="${item.class ? item.class : ``}" href="javascript:;">${
              item.title
            }</a>
            </li>`;
          });
          str += `
          </ul>`;
        }
        str += `
        </div>`;
      });

      str += `
      </div>`;
      console.log(str);
      $("#bottom").prepend($(str));
    }
  },
});
```

**åŒæ—¶ä¸è¦å¿˜äº†å°† html ä¸­ä¹‹å‰å†™å¥½çš„å†…å®¹åˆ é™¤æ‰**

### å¤§åŠŸå‘Šæˆ æˆåŠŸæ¸²æŸ“

# ä»Šæ—¥å†…å®¹ç»“æŸ

_è¿™ä¸ªç”Ÿæ—¥ä¸å¿«ä¹:(_
